# 파이썬 프롬프트 생성/관리기
![mainWindow](mainWindow.png)
간이로 만든 프롬프트 관리기입니다. 아직은 기능이 많지 않지만, 추후에 기능을 추가할 예정입니다.

## 텍스트 프롬프트 생성창

좌측 상,중단 텍스트 에디터입니다. 상단은 긍정, 중단은 부정 프롬프트입니다.

평범하게 텍스트를 편집할 수 있는 편집창입니다.

QtTextEdit의 기본 단축키를 지원합니다 (Ctrl + ZXCVY).

그 외에 잡스러운 Ollama 기반 텍스트 생성이나, weight 지정 단축키, 키워드 매니저 기능 등이 있습니다.

### 단축키 및 우클릭 메뉴 모음

- `Ctrl + Z,X,C,V,Y`: 실행취소, 잘라내기, 복,붙, 실행취소
- `Ctrl + 1~5`: Weight 0.4~2.0 지정
- `Alt + 1~5`: Weight -0.4~2.0 지정
- `Ctrl + O`: 선택한 텍스트로 Ollama
- `Ctrl + K`: 키워드 매니저
- `Ctrl + P`: 스페이스 두 개로 구분된 텍스트를 순열로 변환

## 옵션 설정창

모든 파라미터를 설정할 수 있는 창입니다.

상호 배타적 파라미터는 드롭다운 박스로 여러 가지 중 하나만 선택할 수 있게 지정되어 있습니다.<br>
ex) --turbo, --relax, --fast는 speed라는 항목에서 지정합니다.

체크박스를 선택하면 해당 파라미터가 입력되는 방식이며, 숫자 지정 파라미터는 최소/최대 범위를 넘어서는 값을 지정할 수 없습니다.<br>

최소, 최대값은 최신버전을 기준으로 지정되어 있으며, 버전은 최신 버전의 Midjorney, Nijijorney만 지원합니다.

## 파라미터 표기법

- \<parm\>: \<type\>, ∈ [\<min\>,\<max\>] = \<default\>
- parm 파라미터는 자료형이 type이며, 최소값 min, 최대값 max를 가지며, 기본값은 default.

## 이미지 입력창

이미지를 입력할 수 있는 창입니다.<br>
URL을 입력하면, 해당 이미지를 다운받은 후 image 폴더에 저장합니다.<br>
한 번 다운로드 받은 이미지는 이미지 폴더에 있는 파일 명으로 바로 불러올 수 있으며, 커맨드 생성 시에는 기존 URL로 자동 치환됩니다.<br>
이미지 입력 별 파라미터를 지정할 수 있으며, 이 값은 이미지가 1개 이상 입력된 경우에 옵션에 자동으로 추가됩니다.<br>
각 이미지 별 가중치도 별도 지정 가능합니다.<br>

### 이미지 입력

- 2장 이상의 입력이 필요합니다.
- iw: float, ∈ [0.0,3.0] = 1.0

### 스타일 레퍼런스

- 정수 URL 입력이 가능합니다. (단, 이미지 다운로드는 하지 않습니다.)
- sref: int, ∈ [0,1000] = 100

### 캐릭터 레퍼런스

- cref: int, ∈ [0,100] = 100

### 파일 저장

image 폴더에 \<이미지 이름\>.\<이미지 확장자\>의 이미지 파일, \<이미지 이름\>.json 파일 두 개를 저장합니다.
json 파일에는 파일의 기존 URL, 이미지 파일 경로(상대경로), 태그 등이 저장됩니다.

Save 버튼을 누르면 이미지 파일과 json 파일이 저장됩니다.

이미지 파일 이름은 Label에 지정된 값으로 새로 바뀌어 저장됩니다.

### 태그 지정

향후 이미지 브라우저 제작 시 태그로 필터링 기능을 만들기 위해 저장하는 값입니다.

### 이미지 브라우저

구현 예정. image 폴더 내 파일을 선택할 수 있는 도구입니다.

## 키워드

카테고리, 키워드, 우선순위를 레코드로 하는 CSV 테이블을 읽어 키워드를 관리합니다.

읽는 파일은 keywards.csv 이며, 예제로 작성된 파일을 참고하여 키워드를 작성하시면 됩니다.

# Ollama 설정
로컬 LLM을 사용하기 때문에 별도의 API 키 입력은 필요하지 않으나, Ollama 설치가 필요합니다.

https://ollama.com/download 클릭 시 Ollama 프로그램을 다운로드 합니다.

이후 pullama.bat을 실행하여 필요한 모델을 다운로드 해 주세요.

다운로드 받는 모델은 llama3.1:8b이며, 향후 변동될 수 있습니다.

Ollama 사용 기능은 Ollama가 켜져있지 않으면 동작하지 않습니다.

# 사용 방법
run-script.bat을 실행하면 됩니다.

run-script.bat에서는 아래 일을 수행합니다.
- .venv 폴더가 없으면 .venv를 구성합니다.
- 처음 .venv를 구성하는 경우 requirements.txt에 있는 패키지를 설치합니다.
- .venv를 활성화한 후, main.py를 실행합니다.

# 호환성
Python 3.12에서 개발되었습니다. 이전 버전에 대한 테스트는 수행되지 않았습니다.

# 로그
기본적으로 GUI와 함께 콘솔창이 그대로 남아있으며 로그는 콘솔창에 바로 출력됩니다.

# 구현 예정 사항
- 이미지 브라우저
- 디스코드 연동 (명령어 전송, 이미지 업로드 등)
- Ollama3.2 이미지 입력 지원 